(()=>{"use strict";var e,t,n,c,i,o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=e,i=t,o={};o[c]=i,chrome.storage.sync.set(o,n)},l=(e=document.createElement("div"),t=document.createElement("button"),n=document.createElement("button"),c=document.createElement("img"),i=document.createElement("img"),e.id="features-container",t.id="highlight-feat",n.id="notes-feat",c.src="https://img.icons8.com/fluent-systems-regular/48/000000/chisel-tip-marker.png",i.src="https://img.icons8.com/dotty/80/000000/notepad.png",t.className="feature-button",n.className="feature-button",c.className="icon",i.className="icon",e.appendChild(t),e.appendChild(n),t.appendChild(c),n.appendChild(i),t.addEventListener("click",(function(){(function(e,t){try{return chrome.storage.sync.get(["selection"],void 0)}catch(e){return null}})()||alert("!warn: highlight something with your mouse first")})),n.addEventListener("click",(function(){})),e);document.getElementsByTagName("body")[0].appendChild(l);var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){var n=t.getRangeAt(0).getBoundingClientRect(),c=n.right,i=n.top,o=document.documentElement.scrollLeft,a=document.documentElement.scrollTop;l.style.left="".concat(c+o-1,"px"),l.style.top="".concat(i+a-l.offsetHeight-3,"px")}else l.style.left="".concat(e.pageX+1,"px"),l.style.top="".concat(e.pageY-l.offsetHeight-5,"px");l.style.visibility="visible"};window.addEventListener("click",(function(e){var t=function(){var e=null;console.log("active element:",document.activeElement.tagName);var t=document.activeElement.tagName;if("INPUT"!==t&&"TEXTAREA"!==t){if(window.getSelection?e=window.getSelection():document.getSelection?e=document.getSelection():document.selection&&(e=document.selection.createRange()),"Range"!==e.type&&(e=null),e){var n=e.text?e.text:e.toString();o("selectionText",n)}return o("selection",e),e}}();t?a(e,t):l.style.visibility="hidden"})),window.addEventListener("contextmenu",(function(e){a(e)}))})();